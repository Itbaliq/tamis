
let store={
  _state:{
    profilePage:{
      posts:[
        {stat:1,id:12,habar:"Oyn",count:4,price:"$3.00"}
      ],
      goods:[
        {stat:1,id:12,habar:"Oyn",count:4,price:"$3.00"}
      ],
      operations:[
        {id:0,price:"$3.00",goods:"{ Id: 6853| Name of item: Oyn| Count: 1| Price: $3.00 }"}
      ],
      articles:[
        {state:0,id:123,idmaster:1,name:"МОЖЖЕВЕЛЬНИК—Juniperus",
        text:"Наиболее крупный род семейства кипарисовых, включает около 70 видов. В природе представлен невысокими деревьями, кустарниками и стланиками. Хвоя разнообразная, игольчатая или чешуйчатая, нередко на одном растении не одинакова. Плоды — шишкоягоды, при созревании не древесневеющие, с сочной темно-синей с сизым налетом оболочкой. Растут достаточно медленно, по сравнению с другими родами хвойных.",image:'Pictures'},
        {state:0,id:211,idmaster:21,name:"ГИНКГО ДВУЛОПАСТНОЙ",text:"Уникальное растение, единственный представитель класса гинкговых отдела голосеменных. Его эволюционный возраст, по оценкам ученых, составляет более двухсот миллионов лет. В естественных условиях встречается на очень незначительной территории в Юго-Восточном Китае. Крупное листопадное дерево, к 30 годам достигает 8-12 м высотой. Ствол прямой, крона коническая, в молодости — узкоконическая. Молодые листья светло-зеленые, зрелые – сизовато-зеленые, кожистые, веерообразные, с уникальным дихотомическим жилкованием. Осенью листва желтеет, очень декоративна, но с наступлением холодов быстро осыпается, нередко за одну ночь. Растение двудомное. Цветы неприметные, опыляются одновременно с облиствением. Семена созревают к осени, напоминают желтую сливу, съедобные, но с очень неприятным запахом. Однако плодоносить дерево начинает только после 25 лет, до этого определить к какому роду относится данный экземпляр, по внешнему виду, к сожалению, практически не возможно.Растения обладают уникальными способностями приспосабливаться к условиям обитания, выработанными за миллионы лет. Растение дымо-, газо-, засухоустойчиво и морозостойко. При этом молодые экземпляры менее устойчивы к погодным условиям, нередко подмерзают, а при содержании в контейнерах могут и вымерзнуть. С возрастом устойчивость повышается, по крайней мере, в отношении морозо- и жаростойкости. Крупные экземпляры достаточно легко переносят пересадку и быстро трогаются в рост.Используются для одиночных посадок в садах и парках. На Востоке – священное дерево, почитается в Китае, Японии, Корее.Декоративные культивары начали появляться на нашем рынке только несколько лет назад. И хотя их список не менее трех десятков, они очень дороги и их интродукцией, пока еще, мало кто занимался. В основном это карликовые, компактные формы с шаровидной, пирамидальной или повислой формами крон. Очень эффектны сорта с пестрыми, желтыми или «кучерявыми» листьями. Есть вероятность, что многие из них могут быть использованы в наших условиях, но это требует длительной и тщательной проверки.",image:'Pictures'},
        {state:0,id:212,idmaster:21,name:"ГИНКГО ДВУЛОПАСТНОЙ МАРИКЕН",text:"Новый карликовый сорт гинкго, получен в Нидерландах в 1995 году и очень быстро стал популярным по всей Европе. Размножают его с помощью прививки, при нижней получают шаровидный куст, при верхней – миниатюрное деревце, высота штамба которого зависит исключительно от высоты прививки. Сорт имеет компактную шаровидную крону, максимальный диаметр которой пока не известен, так как сорт молодой, а сами гинкго – долгожители,предполагают около 3 м. Молодые побеги относительно короткие, коренастые, широкие, листовые почки на них располагаются очень густо – это характерная особенность данного сорта. Листья достаточно крупные, молодые ярко-зеленые, зрелые – голубовато-зеленые, темные. Осенью окрашивается в очень яркие желтые тона. Данных о цветении и плодоношении не имеется.Растения могут расти, как на солнце, так и в полутени. К почвам не требователен, не выносит только заболачивания, но экспериментировать с таким редким сортом на неокультуренных сухих почвах лучше не стоит. Полив требуется регулярный, особенно в жаркое время года. Работать с этим сортом мы начали осенью 2009 года.Очень сложной зимой 2009-2010 годов, когда привычные нам растения выпадали сотнями, из 10 наших экземпляров выпало только 2, наиболее хилых. Остальные очень дружно весной стартонули в рост, не демонстрируя никаких признаков подмерзания, благополучно перенесли страшную засуху лета 2010. Данный сорт формирует достаточно плотную крону самостоятельно, но для создания правильного шара небольших размеров можно воспользоваться стрижкой, которую растения легко переносят.Чаще всего используется для небольших композиций переднего плана в качестве небольшого штамбового деревца. В крупных композициях легко теряется, поэтому обычно не используется. В Европе его рекламируют в качестве идеального сорта для контейнерной культуры, но мы бы не советовали держать растения в контейнерах в регионах с засушливым континентальным климатом.",image:'Pictures'},
      ],
      folder:[
        {state:0,id:1,idmaster:145,name:"ЛИСТВЕННЫЕ РАСТЕНИЯ"},
        {state:0,id:2,idmaster:145,name:"ХВОЙНЫЕ РАСТЕНИЯ"},
        {state:0,id:21,idmaster:2,name:"ГИНКГО — Ginkgo"},
        {state:0,id:22,idmaster:2,name:"ЕЛЬ — Picea"},
        {state:0,id:23,idmaster:2,name:"КИПАРИСОВИК — Chamaecyparis"},
        {state:0,id:24,idmaster:2,name:"ЛИСТВЕННИЦА — Larix"},
        {state:0,id:25,idmaster:2,name:"МИКРОБИОТА — Microbiota"},
        {state:0,id:26,idmaster:2,name:"МОЖЖЕВЕЛЬНИК — Juniperus"},
        {state:0,id:27,idmaster:2,name:"ПИХТА — Abies"},
        {state:0,id:28,idmaster:2,name:"СОСНА — Pinus"},
        {state:0,id:29,idmaster:2,name:"ТУЯ — Thuja"},
      ],
      way:[
        {id:145,name:"Begining"}
      ],
      newId:'',
      newName:'',
      newPostText:'',
      newImage:'',
      newCount:'',
      newPrice:'',
      CurrentFolder:145,
      but1:0,
      but2:0,
      ser:'',
      ser_shop:'',
      total_price:"$0.00",


  },





},
  _callSubscriber () {
 console.log('shhh');},

  getState(){
    return this._state;},
  subscribe  (observer) {
      this._callSubscriber=observer;
    },

  dispatch(action){
    if(action.type==='Add-Article'){
      this.del({type:"rebuild-search" });
      let newPost={
        state:0,
        id:this._state.profilePage.newId,
        idmaster:action.idmaster,
        name:this._state.profilePage.newName,
        text:this._state.profilePage.newPostText,
        image:action.newImage,

      };
      this._state.profilePage.newId ='';
      this._state.profilePage.newPostText ='';
      this._state.profilePage.newName ='';
      this._state.profilePage.newImage ='';
      this._state.profilePage.articles.push (newPost);
     this._callSubscriber(this._state);
    }
    if(action.type==='Add-Folder'){
      this.del({type:"rebuild-search" });
      let newFolder={
        state:0,
        id:this._state.profilePage.newId,
        idmaster:action.idmaster,
        name:this._state.profilePage.newName,
      };
      this._state.profilePage.newId ='';
      this._state.profilePage.newPostText ='';
      this._state.profilePage.newName ='';
      this._state.profilePage.newImage ='';
      this._state.profilePage.folder.push (newFolder);
     this._callSubscriber(this._state);
    }
    if(action.type==='Back'){
   for (const p in this._state.profilePage.folder){
     if(this._state.profilePage.folder[p].id===this._state.profilePage.CurrentFolder){
       this._state.profilePage.way.splice (this._state.profilePage.way.length-1,1);
       this._state.profilePage.CurrentFolder=this._state.profilePage.folder[p].idmaster;
     }

   }

     this._callSubscriber(this._state);
    }
    if(action.type==='Back-by-road'){
      let flag=0;
      if(action.id!==this._state.profilePage.CurrentFolder){
      for (let p in this._state.profilePage.way){
        if(this._state.profilePage.way[p].id===action.id){
          flag=1;
          p++;
        }
        if(flag===1){
        this._state.profilePage.way.splice (p,1);}
      }
    this._state.profilePage.CurrentFolder=action.id;}
     this._callSubscriber(this._state);
    }
    if(action.type==='ADD-POST'){
      this.del({type:"rebuild-search" });
      this.dispatch({type:"price-form",newPricee:this._state.profilePage.newPrice});
      let newPost={
        stat:1,
        id:this._state.profilePage.newId,
        habar: this._state.profilePage.newPostText,
        count: this._state.profilePage.newCount,
        price:this._state.profilePage.newPrice

      };
      this._state.profilePage.posts.push (newPost);
      this._state.profilePage.newId ='';
      this._state.profilePage.newPostText ='';
      this._state.profilePage.newCount ='';
      this._state.profilePage.newPrice ='';
    var fil =  this._state.profilePage.posts.filter(function (el) {
     return el != null;
   });
     this._state.profilePage.posts=fil;
     this._callSubscriber(this._state);
    }
    else if (action.type==='UPDATE-NEW-ID') {
      this._state.profilePage.newId =action.newIdd;
      this._callSubscriber(this._state);

    }
    else if (action.type==='UPDATE-NEW-IMAGE') {
      this._state.profilePage.newImage =action.newImage;
      this._callSubscriber(this._state);

    }
    else if (action.type==='UPDATE-NEW-POST-TEXT') {
      let s= action.newText.toLowerCase();
     for (const p in this._state.profilePage.posts) {
          let q = this._state.profilePage.posts[p].habar.toLowerCase();
            if (q===s){
            this._state.profilePage.newPostText =action.newText+"-Copy";
            this._callSubscriber(this._state);
            break;
          }
            else{
            this._state.profilePage.newPostText =action.newText;
            this._callSubscriber(this._state);
          }


      }
    }
    else if (action.type==='UPDATE-NEW-POST-TEXT-shop') {
      this._state.profilePage.newPostText =action.newText;
      this._callSubscriber(this._state);
       for (const p in this._state.profilePage.posts) {

         if(this._state.profilePage.posts[p].id!=0){
        if(this._state.profilePage.posts[p].habar===action.newText){
 for (const q in this._state.profilePage.goods){
if(this._state.profilePage.goods[q].id!=0){
         if(action.newText.toLowerCase()===this._state.profilePage.goods[q].habar.toLowerCase()){
           this._state.profilePage.newPostText ="";
           this._callSubscriber(this._state);
         }

}
       }
     }
     }
       }


    }
    else if (action.type==='UPDATE-NEW-COUNT') {
      if(action.newCountt>9999){
        action.newCountt=9999;
      }
      this._state.profilePage.newCount =action.newCountt;
      this._callSubscriber(this._state);

    }
    else if (action.type==='UPDATE-NEW-NAME') {
      this._state.profilePage.newName =action.newName;
      this._callSubscriber(this._state);

    }
    else if (action.type==='UPDATE-NEW-PRICE') {

      this._state.profilePage.newPrice =action.newPricee;
      this._callSubscriber(this._state);
    }
    else if (action.type==='update-but1') {
      this._state.profilePage.but1 =action.new;
      this._callSubscriber(this._state);
    }
    else if (action.type==='update-but2') {
      this._state.profilePage.but2 =action.new;
      this._callSubscriber(this._state);
    }
    else if (action.type==='update-ser') {
      this._state.profilePage.ser =action.new;
      this._callSubscriber(this._state);
      if(this._state.profilePage.ser!=""){
      this.del({type:"search",ser:this._state.profilePage.ser });
    }
    this._state.profilePage.ser="";
  }
  else if (action.type==='update-ser-shop') {
    this._state.profilePage.ser_shop =action.new;
    this._callSubscriber(this._state);
    if(this._state.profilePage.ser_shop!=""){
    this.del({type:"search-shop",ser:this._state.profilePage.ser_shop });
  }
  this._state.profilePage.ser="";
}
    else if (action.type==='price-form') {
    const formatter = new Intl.NumberFormat('en-US', {
      style: 'currency',
      currency: 'USD',
      minimumFractionDigits: 2
      })

    this._state.profilePage.newPrice =formatter.format(action.newPricee);
    this._callSubscriber(this._state);
  }
  else if (action.type==='UPDATE-NEW-COUNT2') {
     for (const p in this._state.profilePage.posts) {
       if(action.id===this._state.profilePage.posts[p].id){
         if(this._state.profilePage.posts[p].count!=1){
         if(action.newCountt>(this._state.profilePage.posts[p].count-1)){
           this._state.profilePage.newCount =this._state.profilePage.posts[p].count-1;
         }
         else{
           this._state.profilePage.newCount =action.newCountt;
           this._callSubscriber(this._state);
         }
         }

       }
       }
}
else if (action.type==='UPDATE-NEW-COUNT2-add') {
   for (const p in this._state.profilePage.posts) {
     if(this._state.profilePage.newPostText===this._state.profilePage.posts[p].habar){

       if(action.newCountt>this._state.profilePage.posts[p].count-1){
         this._state.profilePage.newCount=this._state.profilePage.posts[p].count-1;
         this._callSubscriber(this._state);
       }
       else{
         this._state.profilePage.newCount =action.newCountt;
         this._callSubscriber(this._state);
       }

       }

     }
     }
},







  del(ac){

 if(ac.type==='delete'){
    for (const p in this._state.profilePage.posts) {
      if(this._state.profilePage.posts[p].id!=null){
      if(this._state.profilePage.posts[p].id===ac.id){
        this.del({type:"delete-shop",id:ac.id});
        this._state.profilePage.posts[p].id=0;
        this._callSubscriber(this._state);
      }}

}}
 if(ac.type==='delete-shop'){
   for (const p in this._state.profilePage.goods) {
     if(this._state.profilePage.goods[p].id!=0){
     if(this._state.profilePage.goods[p].id===ac.id){
       this._state.profilePage.goods[p].id=0;
       this._callSubscriber(this._state);
     }}

}}
 if(ac.type==='sort-pricemax'){


this._state.profilePage.posts.sort((a, b) => a.price.replace(/[^0-9.]/g,'') < b.price.replace(/[^0-9.]/g,'') ? 1 : -1);
    this._callSubscriber(this._state);

 }
 if(ac.type==='sort-pricemin'){


this._state.profilePage.posts.sort((a, b) => a.price.replace(/[^0-9.]/g,'') > b.price.replace(/[^0-9.]/g,'') ? 1 : -1);
    this._callSubscriber(this._state);

 }
 if(ac.type==='sort-pricemax-shop'){


this._state.profilePage.goods.sort((a, b) => a.price.replace(/[^0-9.]/g,'') < b.price.replace(/[^0-9.]/g,'') ? 1 : -1);
    this._callSubscriber(this._state);

 }
 if(ac.type==='sort-pricemin-shop'){


this._state.profilePage.goods.sort((a, b) => a.price.replace(/[^0-9.]/g,'') > b.price.replace(/[^0-9.]/g,'') ? 1 : -1);
    this._callSubscriber(this._state);

 }
 if(ac.type==='sort-pricemax-operations-price'){
    this._state.profilePage.operations.sort((a, b) => a.price.replace(/[^0-9.]/g,'') < b.price.replace(/[^0-9.]/g,'') ? 1 : -1);
    this._callSubscriber(this._state);
 }
 if(ac.type==='sort-pricemin-operations-price'){


this._state.profilePage.operations.sort((a, b) => a.price.replace(/[^0-9.]/g,'') > b.price.replace(/[^0-9.]/g,'') ? 1 : -1);
    this._callSubscriber(this._state);

 }
 if(ac.type==='sort-namemax'){
  this._state.profilePage.posts.sort(function sortThings(a, b) {
  let bir = a.habar.toLowerCase();
  let eqi = b.habar.toLowerCase();

  return bir < eqi ? -1 : eqi < bir ? 1 : 0;
} )
  this._callSubscriber(this._state);
 }
 if(ac.type==='sort-namemin'){
  this._state.profilePage.posts.sort(function sortThings(a, b) {
  let bir = a.habar.toLowerCase();
  let eqi = b.habar.toLowerCase();

  return bir > eqi ? -1 : eqi > bir ? 1 : 0;
} )
  this._callSubscriber(this._state);
 }
 if(ac.type==='sort-namemax-shop'){
  this._state.profilePage.goods.sort(function sortThings(a, b) {
  let bir = a.habar.toLowerCase();
  let eqi = b.habar.toLowerCase();

  return bir < eqi ? -1 : eqi < bir ? 1 : 0;
} )
  this._callSubscriber(this._state);
 }
 if(ac.type==='sort-namemin-shop'){
  this._state.profilePage.goods.sort(function sortThings(a, b) {
  let bir = a.habar.toLowerCase();
  let eqi = b.habar.toLowerCase();

  return bir > eqi ? -1 : eqi > bir ? 1 : 0;
} )
  this._callSubscriber(this._state);
 }
 if(ac.type==='sort-namemax-operations-price'){
   this._state.profilePage.operations.sort((a, b) => a.id < b.id ? 1 : -1);
       this._callSubscriber(this._state);
 }
 if(ac.type==='sort-namemin-operations-price'){
   this._state.profilePage.operations.sort((a, b) => a.id > b.id ? 1 : -1);
       this._callSubscriber(this._state);

 }
 if(ac.type==='edit'){
   this.dispatch({type:"price-form",newPricee:this._state.profilePage.newPrice});


     for (const p in this._state.profilePage.posts) {
       if(this._state.profilePage.posts[p].id!=0){
       if(this._state.profilePage.posts[p].id===ac.id){
         this._state.profilePage.posts[p].habar=this._state.profilePage.newPostText;
         this._state.profilePage.posts[p].count=this._state.profilePage.newCount;
         this._state.profilePage.posts[p].price=this._state.profilePage.newPrice;
         this.del({type:"edit-shop",id:this._state.profilePage.posts[p].id,newName: this._state.profilePage.posts[p].habar,newCount:this._state.profilePage.posts[p].count,newPrice:this._state.profilePage.posts[p].price});
         this._state.profilePage.newPostText ='';
         this._state.profilePage.newCount ='';
         this._state.profilePage.newPrice ='';
         this._callSubscriber(this._state);
       }}
     }






 }
 if(ac.type==='edit-shop'){

if( this._state.profilePage.newPostText!="" && this._state.profilePage.newCount!="" && this._state.profilePage.newPrice !="" ){
  for (const p in this._state.profilePage.goods) {
    if(this._state.profilePage.goods[p].id!=0){
    if(this._state.profilePage.goods[p].id===ac.id){
      this._state.profilePage.goods[p].habar=this._state.profilePage.newPostText;
      if(this._state.profilePage.goods[p].count>this._state.profilePage.newCount ){
        this._state.profilePage.goods[p].count=this._state.profilePage.newCount-1;
      }

      this._state.profilePage.goods[p].price=this._state.profilePage.newPrice;
      this._state.profilePage.newPostText ='';
      this._state.profilePage.newCount ='';
      this._state.profilePage.newPrice ='';
      this._callSubscriber(this._state);
    }}}
}
else{
  for (const p in this._state.profilePage.goods) {
    if(this._state.profilePage.goods[p].id!=0){
    if(this._state.profilePage.goods[p].id===ac.id){
      this._state.profilePage.goods[p].count=this._state.profilePage.newCount;
      this._state.profilePage.newPostText ='';
      this._state.profilePage.newCount ='';
      this._state.profilePage.newPrice ='';
      this._callSubscriber(this._state);
    }}}
}
 }
 if(ac.type==='search'){
   let s= ac.ser.toLowerCase();



     for (const p in this._state.profilePage.posts) {
       let q = this._state.profilePage.posts[p].habar.toLowerCase();
       if(this._state.profilePage.posts[p].id!=0){
         if (q.includes(s)===false){
         this._state.profilePage.posts[p].stat=0;
         this._callSubscriber(this._state);
       }
       }

   }



 }
 if(ac.type==='search-shop'){
      let s= ac.ser.toLowerCase();
     for (const p in this._state.profilePage.goods) {
       let q = this._state.profilePage.goods[p].habar.toLowerCase();
       if(this._state.profilePage.goods[p].id!=0){
         if (q.includes(s)===false){
         this._state.profilePage.goods[p].stat=0;
         this._callSubscriber(this._state);
       }
       }

   }



 }
 if(ac.type==='rebuild-search'){
     for (const p in this._state.profilePage.posts) {
       if(this._state.profilePage.posts[p].id!=null){
         this._state.profilePage.posts[p].stat=1;
         this._callSubscriber(this._state);
       }

   }
 }
 if(ac.type==='rebuild-search-shop'){
      for (const p in this._state.profilePage.goods) {
        if(this._state.profilePage.goods[p].id!=null){
          this._state.profilePage.goods[p].stat=1;
          this._callSubscriber(this._state);
        }

    }
  }
if(ac.type==="total_price"){
  let sum=0;
  for (const p in this._state.profilePage.goods) {
    if(this._state.profilePage.goods[p].id!=0){
      let count=this._state.profilePage.goods[p].count;
      let price=this._state.profilePage.goods[p].price.toString().replace(/[^0-9.]/g,'');
     sum=sum+(count*price);
    }
}
const formatter = new Intl.NumberFormat('en-US', {
  style: 'currency',
  currency: 'USD',
  minimumFractionDigits: 2
  })

this._state.profilePage.total_price =formatter.format(sum);
this._callSubscriber(this._state);
  }
if(ac.type==='add to basket'){
    let s= this._state.profilePage.newPostText.toLowerCase();
    this.del({type:"rebuild-search" });
    for (const p in this._state.profilePage.posts) {
      let q = this._state.profilePage.posts[p].habar.toLowerCase();
      if(this._state.profilePage.posts[p].id!=0){
        if (q===s){
       this._state.profilePage.newId=this._state.profilePage.posts[p].id;
       this._state.profilePage.newPrice=this._state.profilePage.posts[p].price;
        this._callSubscriber(this._state);
        let newPost={
          stat:1,
          id:this._state.profilePage.newId,
          habar: this._state.profilePage.newPostText,
          count: this._state.profilePage.newCount,
          price:this._state.profilePage.newPrice

        };
        this._state.profilePage.goods.push (newPost);
        this._state.profilePage.newId ='';
        this._state.profilePage.newPostText ='';
        this._state.profilePage.newCount ='';
        this._state.profilePage.newPrice ='';
      var fil =  this._state.profilePage.posts.filter(function (el) {
       return el != null;
      });
       this._state.profilePage.posts=fil;
       this._callSubscriber(this._state);
        this.del({type:"total_price" });
      }
      }

  }

  }
if(ac.type==='buy'){
  if( this._state.profilePage.total_price!="$0.00"){

    let id= Math.floor(Math.random(1) * Math.floor(100000));
    let goods="";


      for (const p in this._state.profilePage.goods) {

        if(this._state.profilePage.goods[p].id!=0){
            goods=goods+" { "
          goods=goods+"Id: "+this._state.profilePage.goods[p].id+"| Name of item: "+this._state.profilePage.goods[p].habar+"| Count: "+this._state.profilePage.goods[p].count+"| Price: "+this._state.profilePage.goods[p].price+" }";
          let s= this._state.profilePage.goods[p].habar.toLowerCase();
         for (const p in this._state.profilePage.posts) {
              let q = this._state.profilePage.posts[p].habar.toLowerCase();
              if(this._state.profilePage.posts[p].id!=0){
                if (q===s){
              //  this._state.profilePage.posts[p].count=this._state.profilePage.posts[p].count-this._state.profilePage.goods[p].count;
                this._callSubscriber(this._state);
                }
              }

          }
        }

    }
    let newPost={

      id:id,
      price:this._state.profilePage.total_price,
      goods: goods

    };
    this._state.profilePage.operations.push (newPost);
    this._state.profilePage.total_price="$0.00";
    this._state.profilePage.newId ='';
    this._state.profilePage.newPostText ='';
    this._state.profilePage.newCount ='';
    this._state.profilePage.newPrice ='';
  var fil =  this._state.profilePage.posts.filter(function (el) {return el != null;});
   this._state.profilePage.posts=fil;
   this._callSubscriber(this._state);
    for (const p in this._state.profilePage.goods) {
      if(this._state.profilePage.goods[p].id!=null){
        this._state.profilePage.goods[p].id=0;
        this._callSubscriber(this._state);
      }

}

}
}

if(ac.type==='show-articles'){
  if(ac.state===0){
    for (const p in this._state.profilePage.articles){
      if(this._state.profilePage.articles[p].id===ac.id){
        this._state.profilePage.articles[p].state=1;
      }
      else
        this._state.profilePage.articles[p].state=2;

    }
  }
  if(ac.state===1){
    for (const p in this._state.profilePage.articles)
        this._state.profilePage.articles[p].state=0;

    }
this._callSubscriber(this._state);
}
if(ac.type==='show-folders'){
this._state.profilePage.CurrentFolder=ac.id;
this.del({type:"Add-Way",id:ac.id,name:ac.name});
this._callSubscriber(this._state);
}
if(ac.type==="Add-Way"){
  let newWay={
    id:ac.id,
    name:ac.name,
  };
  this._state.profilePage.way.push (newWay);
this._callSubscriber(this._state);
}

}

}


export default store;
window.state=store;
